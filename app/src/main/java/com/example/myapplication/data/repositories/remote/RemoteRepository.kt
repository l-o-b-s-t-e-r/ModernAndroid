package com.example.myapplication.data.repositories.remote

import com.example.myapplication.domain.dto.UserDto
import com.example.myapplication.domain.entities.Female
import com.example.myapplication.domain.entities.Male
import kotlin.math.min

class RemoteRepository : IRemoteRepository {

    override fun getAllUsersWithLimit(count: Int): List<UserDto> {
        return sortedUsers.subList(0, count)
    }

    override fun getAllUsersWithLimit(query: String, count: Int): List<UserDto> {
        return sortedUsers.filter {
            it.name.startsWith(query, true)
        }.apply {
            subList(0, min(count, size))
        }
    }

    override fun getAllUsersAfterWithLimit(query: String, userKey: String, count: Int): List<UserDto> {
        sortedUsers.filter {
            it.name.startsWith(query, true)
        }.let { filteredList ->
            filteredList.forEachIndexed { index, user ->
                if (user.name == userKey) {
                    val toIndex = index + count
                    return filteredList.subList(index, min(toIndex, filteredList.size))
                }
            }
        }

        throw ClassNotFoundException()
    }

    val sortedUsers: List<UserDto> by lazy {
        users.sortedBy { it.name }
    }

    val users = listOf(
        UserDto(
            "93",
            "Lucile",
            Female
        ),
        UserDto(
            "42",
            "Jordan",
            Male
        ),
        UserDto(
            "86",
            "Beatriz",
            Female
        ),
        UserDto(
            "61",
            "Emmaline",
            Female
        ),
        UserDto(
            "31",
            "Arthur",
            Male
        ),
        UserDto(
            "47",
            "Mohammad",
            Male
        ),
        UserDto(
            "38",
            "Brandon",
            Male
        ),
        UserDto(
            "19",
            "Buster",
            Male
        ),
        UserDto(
            "16",
            "Chas",
            Male
        ),
        UserDto(
            "34",
            "Quinton",
            Male
        ),
        UserDto(
            "48",
            "Bertram",
            Male
        ),
        UserDto(
            "17",
            "Marcos",
            Male
        ),
        UserDto(
            "6",
            "Weldon",
            Male
        ),
        UserDto(
            "37",
            "Rogelio",
            Male
        ),
        UserDto(
            "24",
            "Samual",
            Male
        ),
        UserDto(
            "77",
            "Colette",
            Female
        ),
        UserDto(
            "50",
            "Page",
            Female
        ),
        UserDto(
            "71",
            "Mee",
            Female
        ),
        UserDto(
            "65",
            "Alta",
            Female
        ),
        UserDto(
            "79",
            "Liana",
            Female
        ),
        UserDto(
            "43",
            "Mario",
            Male
        ),
        UserDto(
            "60",
            "Eun",
            Female
        ),
        UserDto(
            "56",
            "Carmelina",
            Female
        ),
        UserDto(
            "45",
            "Bernard",
            Male
        ),
        UserDto(
            "15",
            "Keenan",
            Male
        ),
        UserDto(
            "92",
            "Darci",
            Female
        ),
        UserDto(
            "41",
            "Dalton",
            Male
        ),
        UserDto(
            "69",
            "Phoebe",
            Female
        ),
        UserDto(
            "4",
            "Kim",
            Male
        ),
        UserDto(
            "51",
            "Analisa",
            Female
        ),
        UserDto(
            "63",
            "Yon",
            Female
        ),
        UserDto(
            "78",
            "Maura",
            Female
        ),
        UserDto(
            "82",
            "Tanna",
            Female
        ),
        UserDto(
            "30",
            "Bennett",
            Male
        ),
        UserDto(
            "3",
            "Alvin",
            Male
        ),
        UserDto(
            "80",
            "Aide",
            Female
        ),
        UserDto(
            "76",
            "Regine",
            Female
        ),
        UserDto(
            "52",
            "Isela",
            Female
        ),
        UserDto(
            "55",
            "Myong",
            Female
        ),
        UserDto(
            "11",
            "Basil",
            Male
        ),
        UserDto(
            "5",
            "Emerson",
            Male
        ),
        UserDto(
            "58",
            "Angila",
            Female
        ),
        UserDto(
            "64",
            "Joanie",
            Female
        ),
        UserDto(
            "0",
            "Damion",
            Male
        ),
        UserDto(
            "68",
            "Maia",
            Female
        ),
        UserDto(
            "87",
            "Carla",
            Female
        ),
        UserDto(
            "54",
            "Lajuana",
            Female
        ),
        UserDto(
            "33",
            "Newton",
            Male
        ),
        UserDto(
            "96",
            "Georgianna",
            Female
        ),
        UserDto(
            "49",
            "Anton",
            Male
        ),
        UserDto(
            "32",
            "Dewayne",
            Male
        ),
        UserDto(
            "95",
            "Aline",
            Female
        ),
        UserDto(
            "73",
            "Emogene",
            Female
        ),
        UserDto(
            "94",
            "Allyn",
            Female
        ),
        UserDto(
            "23",
            "Claud",
            Male
        ),
        UserDto(
            "9",
            "Harvey",
            Male
        ),
        UserDto(
            "97",
            "Marianne",
            Female
        ),
        UserDto(
            "88",
            "Rosa",
            Female
        ),
        UserDto(
            "39",
            "Patricia",
            Male
        ),
        UserDto(
            "70",
            "Catrina",
            Female
        ),
        UserDto(
            "66",
            "Mathilde",
            Female
        ),
        UserDto(
            "36",
            "Tracy",
            Male
        ),
        UserDto(
            "14",
            "Zachary",
            Male
        ),
        UserDto(
            "46",
            "Reynaldo",
            Male
        ),
        UserDto(
            "40",
            "Dewey",
            Male
        ),
        UserDto(
            "67",
            "Jayme",
            Female
        ),
        UserDto(
            "62",
            "Melania",
            Female
        ),
        UserDto(
            "81",
            "Yolando",
            Female
        ),
        UserDto(
            "27",
            "Richard",
            Male
        ),
        UserDto(
            "12",
            "Francis",
            Male
        ),
        UserDto(
            "28",
            "Cleveland",
            Male
        ),
        UserDto(
            "75",
            "Jacqueline",
            Female
        ),
        UserDto(
            "53",
            "Shaina",
            Female
        ),
        UserDto(
            "22",
            "Samuel",
            Male
        ),
        UserDto(
            "99",
            "Daniella",
            Female
        ),
        UserDto(
            "29",
            "Jake",
            Male
        ),
        UserDto(
            "89",
            "Lorrine",
            Female
        ),
        UserDto(
            "26",
            "Sanford",
            Male
        ),
        UserDto(
            "91",
            "Verla",
            Female
        ),
        UserDto(
            "1",
            "Otto",
            Male
        ),
        UserDto(
            "10",
            "Eugenio",
            Male
        ),
        UserDto(
            "57",
            "Nicki",
            Female
        ),
        UserDto(
            "98",
            "Sharyn",
            Female
        ),
        UserDto(
            "90",
            "Carmelita",
            Female
        ),
        UserDto(
            "25",
            "Colby",
            Male
        ),
        UserDto(
            "21",
            "Prince",
            Male
        ),
        UserDto(
            "84",
            "Lavada",
            Female
        ),
        UserDto(
            "13",
            "Bryce",
            Male
        ),
        UserDto(
            "74",
            "Sophie",
            Female
        ),
        UserDto(
            "59",
            "Amanda",
            Female
        ),
        UserDto(
            "20",
            "Sid",
            Male
        ),
        UserDto(
            "7",
            "Ali",
            Male
        ),
        UserDto(
            "8",
            "Ferdinand",
            Male
        ),
        UserDto(
            "18",
            "Thad",
            Male
        ),
        UserDto(
            "2",
            "Brock",
            Male
        ),
        UserDto(
            "72",
            "Erica",
            Female
        ),
        UserDto(
            "83",
            "Mathilda",
            Female
        ),
        UserDto(
            "44",
            "Irving",
            Male
        ),
        UserDto(
            "35",
            "Mohamed",
            Male
        ),
        UserDto(
            "85",
            "Deadra",
            Female
        )
    )
}